# 数据库架构规划 (Supabase)

**版本**: 1.1

## 1. 文档修订记录

| 版本  | 日期       | 修订人 | 修订说明                 |
| :---- | :--------- | :----- | :----------------------- |
| 1.0   | 2025-08-05 | Gemini | 基于项目原型创建         |
| 1.1   | 2025-08-05 | Gemini | 新增“阵营” (faction) 字段 |

## 2. 用户与认证

### `profiles` (公开)

| 字段名   | 类型                | 描述                                     | 备注                       |
|----------|---------------------|------------------------------------------|----------------------------|
| `id`     | `uuid` (主键)       | 用户ID，与 `auth.users.id` 关联。        | `references auth.users on delete cascade` |
| `role`   | `text`              | 用户角色（例如：'user', 'admin'）。      | 默认为 'user'。            |
| `faction`| `text`              | **[新增]** 用户选择的阵营。例如 'tianming' 或 'nishang'。 | 可为 NULL，新用户默认为空。 |
| `updated_at` | `timestamp with time zone` | 最后更新时间。                           | 自动更新。                 |

... (其余内容保持不变) ...
